<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="一叶一世界，一念一修行。">
<meta property="og:type" content="website">
<meta property="og:title" content="A heart to go">
<meta property="og:url" content="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/index.html">
<meta property="og:site_name" content="A heart to go">
<meta property="og:description" content="一叶一世界，一念一修行。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A heart to go">
<meta name="twitter:description" content="一叶一世界，一念一修行。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/"/>





  <title>A heart to go</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/MonkeyDjialinXie"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">A heart to go</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/about.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/2019/01/28/穿越海螺角/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢嘉林">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A heart to go">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/28/穿越海螺角/" itemprop="url">穿越海螺角</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-28T23:35:47+08:00">
                2019-01-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>海天一色，礁石临立，海岸线徒步，因人与人之间的互助而更美好。</em></p>
<p><img src="/01/28/穿越海螺角/IMG_20190126_122233.jpg" alt=""><br>作为2019年第一场徒步，也作为春节前最后一场徒步，选择了有别于之前武功山，凤凰径，三水线纯爬山的徒步，而选择了海岸线徒步，坐标：海螺角。</p>
<p>1月26日的清晨天气还算不错，没有说低冷的气温，也没有太阳的暴晒，根据规定时间就在集合点集合，就是突然好像说车坏了，所以过来接的大巴比较晚到，其他一切都还好。我们于8点50分上车出发。</p>
<p>在车上，千年领队引导大家相互介绍，跟其他小伙伴相互认识，也讲了为什么一个户外人都有一个外号</p>
<ul>
<li>每个人都是大自然的一部分，用代号到表自己</li>
<li>方便他人记住自己</li>
</ul>
<p>然后说起千年领队为什么叫“穿越千年”，因为他的名字里面有个“顺”字，拆开叫做川页，谐音就叫“穿越”，折万年，百年之中，千年为准，此为”穿越千年”，穿越千年和大家相遇。于是，在领队说完我也开始yy，谢嘉林-&gt;x+0-&gt;任何数加上零都为零答案-&gt;x-&gt;谐音：阿克斯，好吧，大家好，我叫谢嘉林，叫我+0就好了。。。。</p>
<p>之后又说了人在户外分三瓣心，一瓣关心自己，注意调节自己的节奏气息，一瓣关注他人，互帮互助搭一手，剩下一瓣心欣赏风景，毕竟参加徒步就是为了回归大自然，这也算是千年领队的一个徒步价值观，感觉挺正的。恩，千年领队真的很正。</p>
<p>在达到目的地之后，沿着乡间小路又走了差不多20分钟行程就到了海螺角起点：湖头角电厂，只见烟囱向天空冒着滚滚浓烟。<br><img src="/01/28/穿越海螺角/IMG_20190126_115724.jpg" alt=""></p>
<p>往海那边望过去，是一艘艘蓝色的渔船，在海天岛之间构成别样的风景。水很清澈，算得上粤东最洁净的海湾之一。海天一色，一个字来形容：很美。<br><img src="/01/28/穿越海螺角/IMG_20190126_115928.jpg" alt=""><br><img src="/01/28/穿越海螺角/IMG_20190126_115425.jpg" alt=""><br><img src="/01/28/穿越海螺角/IMG_20190126_120233.jpg" alt=""><br><img src="/01/28/穿越海螺角/IMG_20190126_120502.jpg" alt=""></p>
<p>沿着沙滩走了一段之后因为快到正午，大家就停下来先解决午餐问题。<br><img src="/01/28/穿越海螺角/WechatIMG644.jpeg" alt=""></p>
<p>午饭过后也算正式开启了攀岩爬礁之旅，全程60%是岩石，经过3段海滩，1段丛林。虽说海螺角难度系数只有半颗心，但一路上还是要蹦蹦跳跳，手脚并用，最大的庆幸是今天没下雨，不然难度砰砰砰就往上涨了。其实这次徒步最大的收获算事人和人之间的互助，在攀爬礁石的过程中，可能只是搭把手，就能让别人安全的过来，在接触中增加交流，在交流中增加信任。旅途上，就是一个人与人相互帮助的过程，而因为人与人的互助，使旅途更有意义。<br><img src="/01/28/穿越海螺角/IMG_20190126_140130.jpg" alt=""></p>
<p><img src="/01/28/穿越海螺角/IMG_20190126_135830.jpg" alt=""></p>
<p><img src="/01/28/穿越海螺角/WechatIMG645.jpeg" alt=""></p>
<center><font size="1">(同行小伙伴所拍）</font></center>

<p><img src="/01/28/穿越海螺角/IMG_20190126_152352.jpg" alt=""></p>
<p><img src="/01/28/穿越海螺角/WechatIMG646.jpeg" alt=""></p>
<center><font size="1">(同行小伙伴所拍）</font></center>

<p><img src="/01/28/穿越海螺角/IMG_20190126_142334.jpg" alt=""></p>
<p>合照<br><img src="/01/28/穿越海螺角/mmexport1548495789534.jpg" alt=""><br><img src="/01/28/穿越海螺角/mmexport1548496597615.jpg" alt=""><br>最后，离开的太阳也很美（虽说还没到夕阳）。<br><img src="/01/28/穿越海螺角/IMG_20190126_163627_1.jpg" alt=""><br><img src="/01/28/穿越海螺角/WechatIMG647.jpeg" alt=""></p>
<center><font size="1">(同行小伙伴所拍）</font></center><br><img src="/01/28/穿越海螺角/mmexport1548497664579.jpg" alt=""><br><center><font size="1">(同行小伙伴所拍）</font></center>）<br><img src="/01/28/穿越海螺角/mmexport1548495828934.jpg" alt=""><br><center><font size="1">(同行小伙伴所拍）</font></center>

<p>ps:最后我还是继续回去磨练摄影拍照，期待二月。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/2018/08/18/linux常用指令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢嘉林">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A heart to go">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/18/linux常用指令/" itemprop="url">linux常用指令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-18T02:49:52+08:00">
                2018-08-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一、查询日志"><a href="#一、查询日志" class="headerlink" title="一、查询日志"></a>一、查询日志</h3><p><strong>基本</strong></p>
<blockquote>
<p>tail  -n  10  catalina.out   </p>
</blockquote>
<p>查询日志尾部最后10行的日志;</p>
<blockquote>
<p>tail -n +10 catalina.out    </p>
</blockquote>
<p>查询10行之后的所有日志;</p>
<blockquote>
<p>head -n 10  catalina.out   </p>
</blockquote>
<p>查询日志文件中的头10行日志;</p>
<blockquote>
<p>head -n -10  catalina.out   </p>
</blockquote>
<p>查询日志文件除了最后10行的其他所有日志;</p>
<blockquote>
<p>tail -fn catalina.out </p>
</blockquote>
<p>查询日志尾部最后10行的日志,并时时刷新;</p>
<p><strong>查看关键字附近的日志</strong></p>
<blockquote>
<p>cat -n catalina.out |grep “关键字”   </p>
</blockquote>
<p>得到关键字行数</p>
<blockquote>
<p>cat -n catalina.out |tail -n +n1|head -n n2</p>
</blockquote>
<p>tail -n +n1表示查询n1行之后的日志     (行数-显示行数=n1)<br>head -n n2 则表示在前面的查询结果里再查前n2条记录</p>
<blockquote>
<p> cat -n catalina.out |grep “关键字” | more     </p>
</blockquote>
<p>分页打印了,通过点击空格键翻页</p>
<h3 id="二、杀掉进程"><a href="#二、杀掉进程" class="headerlink" title="二、杀掉进程"></a>二、杀掉进程</h3><p><strong>Linux下查看和停止所有java进程</strong></p>
<blockquote>
<p>ps -ef | grep java</p>
</blockquote>
<p>在Linux下查看所有java进程</p>
<blockquote>
<p>pkill - 9 java</p>
</blockquote>
<p>停止所有java进程命令</p>
<blockquote>
<p>kill -9 java 进程序号</p>
</blockquote>
<p>停止特定java进程命令： </p>
<h3 id="三、目录处理命令"><a href="#三、目录处理命令" class="headerlink" title="三、目录处理命令"></a>三、目录处理命令</h3><blockquote>
<p>mkdir –p-m 权限 文件路径名</p>
</blockquote>
<p>递归创建目录，并设置用户权限</p>
<blockquote>
<p>cd 文件路径名</p>
</blockquote>
<p>切换指定目录</p>
<blockquote>
<p>pwd</p>
</blockquote>
<p>显示当前</p>
<blockquote>
<p>rmdir 文件路径名</p>
</blockquote>
<p>删除空目录</p>
<blockquote>
<p>cp 路径A 路径B</p>
</blockquote>
<p>复制文件A到B目录下</p>
<blockquote>
<p>mv 路径A 路径B</p>
</blockquote>
<p>将A文件剪切到B路径下，<code>eg: mv /usr/men/* .</code>将目录/usr/men中的所有文件移到当前目录（用.表示表示当前目录下）</p>
<blockquote>
<p>rm 文件路径名</p>
</blockquote>
<p>删除文件<br>rm –r 删除目录<br>rm –f 强制执行</p>
<!--### 四、权限管理

> chmod

改变文件或目录权限,u=所有者;g=所有组;o=其他人;a=全部

![](http://man.linuxde.net/wp-content/uploads/2013/11/chmod.gif)
r=读取属性　　//值＝4  
w=写入属性　　//值＝2  
x=执行属性　　//值＝1  
rwx—7(4+2+1)
-->

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/2018/05/15/线程基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢嘉林">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A heart to go">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/15/线程基础/" itemprop="url">线程基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-15T10:47:43+08:00">
                2018-05-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="线程的生命周期"><a href="#线程的生命周期" class="headerlink" title="线程的生命周期"></a>线程的生命周期</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> State &#123;</span><br><span class="line"> <span class="comment">/**刚刚创建的线程，还未执行**/</span></span><br><span class="line">    NEW,</span><br><span class="line"> <span class="comment">/**表示一切资源准备就绪，调用start()方法时才表示线程开始执行**/</span></span><br><span class="line">    RUNNABLE,</span><br><span class="line"> <span class="comment">/**执行中遇到锁，会处于阻塞状态，暂停执行，直到获得请求所**/</span></span><br><span class="line"> 	  BLOCKED,</span><br><span class="line"> <span class="comment">/**无限制时间等待**/</span></span><br><span class="line">    WAITING,</span><br><span class="line"> <span class="comment">/**有时限等待**/</span></span><br><span class="line">    TIMED_WAITING,</span><br><span class="line"> <span class="comment">/**技术状态**/</span></span><br><span class="line">    TERMINATED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：状态变化不可逆</p>
<h1 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h1><h2 id="新建线程"><a href="#新建线程" class="headerlink" title="新建线程"></a>新建线程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//通过new新建线程</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread();</span><br><span class="line">        t1.start();</span><br><span class="line">        System.out.println(<span class="string">"finish t1"</span>);</span><br><span class="line">      <span class="comment">//通过重载run方法，让线程做什么</span></span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">super</span>.run();</span><br><span class="line">                System.out.println(<span class="string">"Hello Thread!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t2.start();</span><br><span class="line">        System.out.println(<span class="string">"finish t2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="start-VS-run"><a href="#start-VS-run" class="headerlink" title="start() VS run()"></a>start() VS run()</h3><p><strong>start方法：</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (threadStatus != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalThreadStateException();</span><br><span class="line">            group.add(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">boolean</span> started = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            start0();</span><br><span class="line">            <span class="comment">//更改线程状态</span></span><br><span class="line">            started = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!started) &#123;</span><br><span class="line">                    group.threadStartFailed(<span class="keyword">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ignore) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>run方法：</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">           target.run();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>start（）方法会创建一个新的线程加入线程组中，而run只是串行执行了Runnable里面</p>
<h2 id="自定义线程"><a href="#自定义线程" class="headerlink" title="自定义线程"></a>自定义线程</h2><ul>
<li>继承Thread重载run方法</li>
<li>实现Runable接口<br>因为java单继承的性质，所以优先使用实现Runable接口的方法<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateThread</span> <span class="keyword">implements</span>  <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"hello Thread"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> CreateThread());</span><br><span class="line">      t.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="终止线程"><a href="#终止线程" class="headerlink" title="终止线程"></a>终止线程</h2><p>Thread.stop()方法：直接终止线程，并且立即释放线程所持有的锁。<br>因为过于暴力不安全，不推荐使用。<br><!--如果有线程在写的过程释放锁，会破坏了数据--></p>
<h2 id="线程中断"><a href="#线程中断" class="headerlink" title="线程中断"></a>线程中断</h2><p>线程中断不会使线程立即退出，而是通知目标线程需要退出</p>
<p>中断线程:设置中断标识位，表示当前线程已经中断<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> Thread.interrupt()</span><br></pre></td></tr></table></figure></p>
<p>判断是否被中断<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> Thread.isInterrupted()</span><br></pre></td></tr></table></figure></p>
<p>判断是否被中断,并清楚当前中断标志位状态<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> Thread.isInterrupted()</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterruptDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Interrupted"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">"do it"</span>);</span><br><span class="line">                        <span class="comment">//会由于被中断而抛异常，此时，会清楚中断标记，如果不加则在下次</span></span><br><span class="line">                        <span class="comment">// 循环开始时就无法捕获，故在异常处理中设置了中断标记位</span></span><br><span class="line">                        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Interrupted when sleep"</span>);</span><br><span class="line">                        <span class="comment">//设置中断状态</span></span><br><span class="line">                        Thread.currentThread().interrupt();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                Thread.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">20000</span>);</span><br><span class="line">        t.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="等待和通知"><a href="#等待和通知" class="headerlink" title="等待和通知"></a>等待和通知</h2><p>wait()，notify()，notifyAll都属于Object中的方法：<br>七个小矮人与白雪公主的故事：<br>Object.wait(),进入Object等待队列</p>
<blockquote>
<p>白雪公在厨房切苹果，七个小矮人在客厅等着</p>
</blockquote>
<p>Object.notify()，随机唤醒一个等待线程</p>
<blockquote>
<p>白雪公主切完了，<strong>随机</strong>让其中一个小矮人去尝尝</p>
</blockquote>
<p>Object.notifyAll()，唤醒所有等待</p>
<blockquote>
<p>白雪公主切完了,让所有小矮人去尝尝</p>
<p>最后是不是白雪公主毒死了七个小矮人，公主和王子过上了幸福的生活就让各位脑补了…</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleWN</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> Object object = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">T1</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (object)&#123;</span><br><span class="line">                System.out.println(System.currentTimeMillis() + <span class="string">"T1 start!"</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    object.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(System.currentTimeMillis() + <span class="string">"T1 end!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">T2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (object)&#123;</span><br><span class="line">                System.out.println(System.currentTimeMillis() + <span class="string">"T2 start!"</span>);</span><br><span class="line"></span><br><span class="line">                    object.notify();</span><br><span class="line">                    System.out.println(System.currentTimeMillis() + <span class="string">"T2 end!"</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> T1();</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> T2();</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在T2调用了object.notify()；后T1并不会立即执行，而是T1 要先获得object的对象锁之后才继续执行。</p>
<p>如果不加synchronized关键字的话会报<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalMonitorStateException</span><br></pre></td></tr></table></figure></p>
<p>违法的监控状态异常。当某个线程试图等待一个自己并不拥有的对象（O）的监控器或者通知其他线程等待该对象（O）的监控器时，抛出该异常。</p>
<table>
<thead>
<tr>
<th>method</th>
<th style="text-align:center">wait()</th>
<th style="text-align:right">slee()</th>
</tr>
</thead>
<tbody>
<tr>
<td>相同</td>
<td style="text-align:center">让线程等待若干时间</td>
<td style="text-align:right">让线程等待若干时间</td>
</tr>
<tr>
<td>可否唤醒</td>
<td style="text-align:center">可以</td>
<td style="text-align:right">不可以</td>
</tr>
<tr>
<td>有无释放锁</td>
<td style="text-align:center">有</td>
<td style="text-align:right">无</td>
</tr>
</tbody>
</table>
<h2 id="挂起和继续执行"><a href="#挂起和继续执行" class="headerlink" title="挂起和继续执行"></a>挂起和继续执行</h2><p>线程挂起（suspend)和继续执行resume,已经不推荐使用。<br>原因：suspend（）导致线程暂停同时并不会释放任何锁资源，直到对应线程执行resume（）操作，被挂起线程继续执行，其他阻塞的线程也才继续执行。如果出现resume（）在suspend（）执行，则线程将会一直占用锁。</p>
<h2 id="等待线程结束和谦让"><a href="#等待线程结束和谦让" class="headerlink" title="等待线程结束和谦让"></a>等待线程结束和谦让</h2><p>join:等待线程结束<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//millis表示最大等待时间,如果操作指定时间目标线程还在执行，则不再继续等待，继续执行下去</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">long</span> millis)</span><span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">  ....</span><br><span class="line">    <span class="keyword">if</span> (millis == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">          <span class="comment">//join的本质是让调用线程在垫钱对象上进行等待</span></span><br><span class="line">            wait(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：不要在Thread实例上使用类似wait()，notify()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//无限等待，并一直阻塞当前线程直到目标线程执行完毕</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">       join(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>yield：一旦执行会使当前线程让出CPU（还是会进行CPU资源竞争，所以不一定得到）<br>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">yield</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/2018/03/02/从源码角度看java-ArrayList-一-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢嘉林">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A heart to go">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/从源码角度看java-ArrayList-一-md/" itemprop="url">从源码角度看java-ArrayList</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-02T10:44:29+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ArrayList<e>继承AbstractList<e>并实现List<e>, RandomAccess,Cloneable,java.io.Serializable接口 </e></e></e></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static final int DEFAULT_CAPACITY = 10;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>默认容量 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>空对象数组 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>默认大小的空对象数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transient Object[] elementData;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>数组缓存变量，ArrayList的容量是这个数组缓存变量的长度，关键字transient表示它的值不需要维持，不参与序列化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private int size;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>ArrayList大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> public ArrayList(int initialCapacity) &#123;</span><br><span class="line">     // 如果初始化时ArrayList大小大于0  </span><br><span class="line">     if (initialCapacity &gt; 0) &#123;</span><br><span class="line">     // new一个该大小的object数组赋给elementData </span><br><span class="line">     this.elementData = new Object[initialCapacity]；</span><br><span class="line">     &#125; else if (initialCapacity == 0) &#123;</span><br><span class="line">     // 将空数组赋给elementData</span><br><span class="line">     this.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">     //抛出非法异常，比如说initialCapacity&lt;0</span><br><span class="line">     throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+initialCapacity);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>构造方法 =&gt; 创建容量大小为initialCapacity的空的list</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public ArrayList() &#123;</span><br><span class="line">    this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>构建方法=&gt;创建一个默认长度（10）的空list</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public ArrayList(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">//将c容器转换为object类型的数组</span><br><span class="line">        elementData = c.toArray();</span><br><span class="line">        if ((size = elementData.length) != 0) &#123;</span><br><span class="line">            if (elementData.getClass() != Object[].class)</span><br><span class="line">                elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            this.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>带参数Collection构造方法，Collection有一下类型：  </p>
<ul>
<li>List：元素可以重复的容器</li>
<li>Set: 元素不可重复的容器</li>
<li>Queue:结构是一个队列，先进先出</li>
</ul>
<p>（注意：map也是经常用的集合类，但却没有实现Collection接口，map源码将在以后章节进行解析）</p>
<p>这里是将一个Collection实现类的对象转换为一个ArrayList，c容器装的内容必须为ArrayList装的内容的子类。很好奇什么情况下会出现elementData.getClass() != Object[].class，于是就查看了一下资料说<a href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6260652" target="_blank" rel="noopener">java的一個bug 6260652，toArray() 有可能不會返回Object[]類型</a>。Arrays.copyOf方法最终会调用System.arraycopy实现对数组的复制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public void trimToSize() &#123;</span><br><span class="line"> //modCount是从类 java.util.AbstractList 继承的字段，防止在多线程操作的情况下，List发生结构性的变化</span><br><span class="line">        modCount++;</span><br><span class="line">        if (size &lt; elementData.length) &#123;</span><br><span class="line">        // 重新将elementData设置大小为size </span><br><span class="line">            elementData = (size == 0)</span><br><span class="line">              ? EMPTY_ELEMENTDATA</span><br><span class="line">              : Arrays.copyOf(elementData, size);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong></p>
<ul>
<li>length：ArrayList申请的内容空间长度<!--方便每次添加元素的时候不需要都要扩容--></li>
<li>size：ArrayList元素的个数</li>
</ul>
<p>其中length &gt; size，trimToSize方法就是剔除了为null的元素，将ArrayList的容量设置为当前size的大小，实现容量的压缩</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">//要分配的数组的最大大小</span><br><span class="line">private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</span><br><span class="line">//long int的最大值</span><br><span class="line">public static final int   MAX_VALUE = 0x7fffffff;</span><br><span class="line"></span><br><span class="line">//得到最小扩容量</span><br><span class="line">public void ensureCapacity(int minCapacity) &#123;</span><br><span class="line">//如果elementData为空，minExpand取0，否则去默认容量10</span><br><span class="line">        int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)? 0: DEFAULT_CAPACITY;</span><br><span class="line">        if (minCapacity &gt; minExpand) &#123;</span><br><span class="line">        //扩容</span><br><span class="line">            ensureExplicitCapacity(minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//得到最小扩容量</span><br><span class="line">private void ensureCapacityInternal(int minCapacity) &#123;</span><br><span class="line">        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        //取最大值</span><br><span class="line">            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line">		//扩容</span><br><span class="line">        ensureExplicitCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//判断是否需要扩容</span><br><span class="line">private void ensureExplicitCapacity(int minCapacity) &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        // 如果minCapacity大于elementData.length</span><br><span class="line">        if (minCapacity - elementData.length &gt; 0)</span><br><span class="line">            grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//动态扩容的核心方法</span><br><span class="line">private void grow(int minCapacity) &#123;</span><br><span class="line">        int oldCapacity = elementData.length;</span><br><span class="line">//新数组容量</span><br><span class="line">        int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);</span><br><span class="line">// 判断新数组的容量够不够，</span><br><span class="line">//够了就直接使用这个长度创建新数组，</span><br><span class="line">//不够就将数组长度设置为需要的长度  </span><br><span class="line">        if (newCapacity - minCapacity &lt; 0)</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> private static int hugeCapacity(int minCapacity) &#123;</span><br><span class="line">        if (minCapacity &lt; 0) </span><br><span class="line">           throw new OutOfMemoryError();</span><br><span class="line">        return (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">            Integer.MAX_VALUE :</span><br><span class="line">            MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>最后grow()方法中</p>
<ul>
<li>oldCapacity &gt;&gt; 1表示oldCapacity 右移一位，其效果相当于oldCapacity /2，即ArrayList<strong>默认扩容至1.5倍</strong></li>
<li>调用Arrays.copyOf方法将elementData数组指向新的容量为newCapacity的连续空间并将elementData的数据复制到新的内存空间 </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public int size() &#123;return size;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>返回ArrayList元素个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public boolean isEmpty() &#123;return size == 0;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>判断ArrayList是否为空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public boolean contains(Object o) &#123;</span><br><span class="line">        return indexOf(o) &gt;= 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> public int indexOf(Object o) &#123;</span><br><span class="line">        if (o == null) &#123;</span><br><span class="line">            for (int i = 0; i &lt; size; i++)</span><br><span class="line">                if (elementData[i]==null)</span><br><span class="line">                    return i;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (int i = 0; i &lt; size; i++)</span><br><span class="line">                if (o.equals(elementData[i]))</span><br><span class="line">                    return i;</span><br><span class="line">        &#125;</span><br><span class="line">        return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>对象o在ArrayList中的下标位置，如果存在返回位置i，不存在返回-1,如果o为空返回0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public int lastIndexOf(Object o) &#123;</span><br><span class="line">        if (o == null) &#123;</span><br><span class="line">            for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">                if (elementData[i]==null)</span><br><span class="line">                    return i;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">                if (o.equals(elementData[i]))</span><br><span class="line">                    return i;</span><br><span class="line">        &#125;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>返回容器内出现o的最后一个位置，从后向前遍历，得到第一个出现对象o的位置，不存在则返回-1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public Object clone() &#123;</span><br><span class="line">       try &#123;</span><br><span class="line">   // 调用父类Object类的clone方法得到一个ArrayList副本  </span><br><span class="line">           ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone();</span><br><span class="line">   //将原有对象的数据导入到新创建的对象中。</span><br><span class="line">           v.elementData = Arrays.copyOf(elementData, size);</span><br><span class="line">           v.modCount = 0;  //初始化modCount</span><br><span class="line">   //返回副本</span><br><span class="line">           return v;</span><br><span class="line">       &#125; catch (CloneNotSupportedException e) &#123;</span><br><span class="line">           // this shouldn&apos;t happen, since we are Cloneable</span><br><span class="line">           throw new InternalError(e);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>clone() 属于Object里面的方法,创建一个对象,然后将原有对象的数据导入到新创建的数据中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public Object[] toArray() &#123;</span><br><span class="line">        return Arrays.copyOf(elementData, size);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将list转化为一个数组，直接调用Arrays类的copyOf方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public &lt;T&gt; T[] toArray(T[] a) &#123; </span><br><span class="line">//如果a的长度小于ArrayList的长度，直接调用Arrays类的copyOf，返回一个比a数组长度要大的新数组，里面元素就是ArrayList里面的元素</span><br><span class="line">		if (a.length &lt; size)</span><br><span class="line">        return (T[]) Arrays.copyOf(elementData, size, a.getClass());</span><br><span class="line">//如果a的长度比ArrayList的长度大，那么就调用System.arraycopy，将ArrayList的elementData数组赋值到a数组，然后把a数组的size位置赋值为空。        </span><br><span class="line">       System.arraycopy(elementData, 0, a, 0, size);</span><br><span class="line">       if (a.length &gt; size)</span><br><span class="line">            a[size] = null;</span><br><span class="line">        return a;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将ArrayList里面的元素赋值到一个数组中去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">private void rangeCheck(int index) &#123;</span><br><span class="line">        if (index &gt;= size)</span><br><span class="line">            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>检查是否越界，如果是抛出IndexOutOfBoundsException异常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public E get(int index) &#123;</span><br><span class="line">        rangeCheck(index); </span><br><span class="line">        return elementData(index);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong> 先检查是否越界，然后返回ArrayList的elementData数组index位置的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public E set(int index, E element) &#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        E oldValue = elementData(index);</span><br><span class="line">        elementData[index] = element;</span><br><span class="line">        return oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong> 先检查是否越界，然后设置elementData数组index位置的元素为element。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public boolean add(E e) &#123;</span><br><span class="line">   	   ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class="line">      elementData[size++] = e;</span><br><span class="line">      return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>扩容后将e赋值给elementData的size+1的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public void add(int index, E element) &#123;</span><br><span class="line">	   //判断是否越界</span><br><span class="line">        rangeCheckForAdd(index);</span><br><span class="line">	  //扩容</span><br><span class="line">        ensureCapacityInternal(size + 1);  // Increments modCount!!</span><br><span class="line">     // 将elementData从index位置开始，复制到elementData的index+1开始的连续空间，size - index表示复制的元素的个数</span><br><span class="line">        System.arraycopy(elementData, index, elementData, index + 1,</span><br><span class="line">                         size - index);</span><br><span class="line">        elementData[index] = element;</span><br><span class="line">        size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将特定元素element插入ArrayList的index位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public E remove(int index) &#123;</span><br><span class="line">//查看是否越界</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">//对ArrayList进行删改时需要自增1</span><br><span class="line">        modCount++;</span><br><span class="line">// 读取index位置的值 </span><br><span class="line">        E oldValue = elementData(index);</span><br><span class="line">// 获取index位置开始到最后一个位置的个数  </span><br><span class="line">        int numMoved = size - index - 1;</span><br><span class="line">        if (numMoved &gt; 0)</span><br><span class="line">// 将elementData数组index+1位置开始拷贝到elementData从index开始的空间  </span><br><span class="line">            System.arraycopy(elementData, index+1, elementData, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">// 使size-1 ，设置elementData的size位置为空，让GC来清理内存空间                               </span><br><span class="line">        elementData[--size] = null; // clear to let GC do its work</span><br><span class="line">        return oldValue;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>在ArrayList的移除index位置的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private void fastRemove(int index) &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        int numMoved = size - index - 1;</span><br><span class="line">        if (numMoved &gt; 0)</span><br><span class="line">            System.arraycopy(elementData, index+1, elementData, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">        elementData[--size] = null; // clear to let GC do its work</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public boolean remove(Object o) &#123;</span><br><span class="line">        //判断o是否为空，如果为空</span><br><span class="line">        if (o == null) &#123;</span><br><span class="line">            for (int index = 0; index &lt; size; index++)</span><br><span class="line">            //将第一个出现为null的值移除掉</span><br><span class="line">                if (elementData[index] == null) &#123;</span><br><span class="line">                    fastRemove(index);</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">        //如果不为空</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (int index = 0; index &lt; size; index++)</span><br><span class="line">            //将第一个出现对象o的值移除掉</span><br><span class="line">                if (o.equals(elementData[index])) &#123;</span><br><span class="line">                    fastRemove(index);</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>在ArrayList的移除对象为O的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public void clear() &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        // clear to let GC do its work</span><br><span class="line">        for (int i = 0; i &lt; size; i++)</span><br><span class="line">        //将elementData[i]置空，让GC来清理内存空间</span><br><span class="line">        		elementData[i] = null;</span><br><span class="line">        //将size置0</span><br><span class="line">        size = 0;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将list里面的所有元素移除，将会返回一个空的list。clear操作并不是从空间内删除，只是设置为null值，然后等待垃圾回收机制来回收，把size设置为0，以便我们不会浏览到null值的内存空间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public boolean addAll(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">		//将c转换为数组</span><br><span class="line">        Object[] a = c.toArray();</span><br><span class="line">		//新增的长度</span><br><span class="line">        int numNew = a.length;</span><br><span class="line">		//扩容至size + numNew长度</span><br><span class="line">        ensureCapacityInternal(size + numNew);  // Increments modCount</span><br><span class="line">       //将a的第0位开始拷贝至elementData的size位开始，拷贝长度为numNew   </span><br><span class="line">        System.arraycopy(a, 0, elementData, size, numNew);</span><br><span class="line">       //size增加长度numNew</span><br><span class="line">        size += numNew;</span><br><span class="line">       //如果c为空，返回false，c不为空，返回true  </span><br><span class="line">        return numNew != 0;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将Collection c的全部元素添加到ArrayList中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">		// 判断index大于size或者是小于0,如果是，则抛出IndexOutOfBoundsException异常  </span><br><span class="line">        rangeCheckForAdd(index);</span><br><span class="line">		//将c转换为数组</span><br><span class="line">        Object[] a = c.toArray();</span><br><span class="line">        int numNew = a.length;</span><br><span class="line">        // 扩容至size + numNew </span><br><span class="line">        ensureCapacityInternal(size + numNew); </span><br><span class="line">        int numMoved = size - index;</span><br><span class="line">        if (numMoved &gt; 0)</span><br><span class="line">            System.arraycopy(elementData, index, elementData, index + numNew,</span><br><span class="line">                             numMoved);</span><br><span class="line"></span><br><span class="line">        System.arraycopy(a, 0, elementData, index, numNew);</span><br><span class="line">        size += numNew;</span><br><span class="line">        return numNew != 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">private void rangeCheckForAdd(int index) &#123;</span><br><span class="line">        if (index &gt; size || index &lt; 0)</span><br><span class="line">            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private String outOfBoundsMsg(int index) &#123;</span><br><span class="line">       return &quot;Index: &quot;+index+&quot;, Size: &quot;+size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>从第index位开始，将c全部拷贝到ArrayList</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) &#123;</span><br><span class="line">        final Object[] elementData = this.elementData;  </span><br><span class="line">     // 定义两个变量w，r，同时右移     </span><br><span class="line">    int r = 0, w = 0;  </span><br><span class="line">    boolean modified = false;  </span><br><span class="line">    try &#123;  </span><br><span class="line">         // r右移  </span><br><span class="line">        for (; r &lt; size; r++)  </span><br><span class="line">              // 如果c中不包含elementData[r]这个元素  </span><br><span class="line">            if (c.contains(elementData[r]) == complement)  </span><br><span class="line">                  // 则直接将r位置的元素赋值给w位置的元素，w自增  </span><br><span class="line">                elementData[w++] = elementData[r];  </span><br><span class="line">    &#125; finally &#123;  </span><br><span class="line">        // 防止抛出异常导致上面r的右移过程没完成  </span><br><span class="line">        if (r != size) &#123;  </span><br><span class="line">              // 将r未右移完成的位置的元素赋值给w右边位置的元素  </span><br><span class="line">            System.arraycopy(elementData, r,  </span><br><span class="line">                             elementData, w,  </span><br><span class="line">                             size - r);  </span><br><span class="line">              // 修改w值增加size-r  </span><br><span class="line">            w += size - r;  </span><br><span class="line">        &#125;  </span><br><span class="line">        if (w != size) &#123;  </span><br><span class="line">            // 如果有被覆盖掉的元素，则将w后面的元素都赋值为null  </span><br><span class="line">            for (int i = w; i &lt; size; i++)  </span><br><span class="line">                elementData[i] = null;  </span><br><span class="line">            modCount += size - w;  </span><br><span class="line">              // 修改size为w  </span><br><span class="line">            size = w;  </span><br><span class="line">            modified = true;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    return modified;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>根据complement值，将ArrayList中包含c中元素的元素删除或者保留。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public boolean removeAll(Collection&lt;?&gt; c) &#123;</span><br><span class="line">		//如果c为null抛出NullPointerException异常</span><br><span class="line">       Objects.requireNonNull(c);</span><br><span class="line">     //调用batchRemove将list中存在于Collection c的元素移除</span><br><span class="line">       return batchRemove(c, false);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将list中存在于Collection c的元素移除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public boolean retainAll(Collection&lt;?&gt; c) &#123;</span><br><span class="line">        Objects.requireNonNull(c);</span><br><span class="line">        return batchRemove(c, true);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong>将list中存在于Collection c的元素保留</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="git@github.com:MonkeyDjialinXie/MonkeyDjialinXie.github.io.git/2018/01/14/第一个博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢嘉林">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A heart to go">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/14/第一个博客/" itemprop="url">第一个博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-14T10:41:02+08:00">
                2018-01-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="我"><a href="#我" class="headerlink" title="我"></a>我</h2><blockquote>
<p>一个爱徒步，爱看书，爱听周杰伦音乐，爱咖啡的程序员，从沉浸在自己世界自嗨的人现在需要寻找自己的生活，自己的理念，自己的梦想，做一个有趣的人！</p>
</blockquote>
<h2 id="这个世界变化太快"><a href="#这个世界变化太快" class="headerlink" title="这个世界变化太快"></a>这个世界变化太快</h2><blockquote>
<p>在踏上移动互联网这一高速公路之后，世界变得便捷，方便，简单，同时也带来了急燥和不安。可以说，作为一个90后,经历了一个从没有互联网，到互联网，到移动互联网，甚至接下来的人工智能，中间的变化是挺大的，不仅仅传承了上一代人物质较匮乏时代的精神理念，同时又要接受并消化新一代00后的文化。世界每一分每一秒还在变，可能一个概念还没来得及消化又衍生出新的概念，看着看着也就变成了生活的看客。在这个多样，多变的世界里，我们需要知道自己要什么。</p>
</blockquote>
<h2 id="培养兴趣"><a href="#培养兴趣" class="headerlink" title="培养兴趣"></a>培养兴趣</h2><blockquote>
<p>要知道自己要什么首先得有自己的兴趣。兴趣仿佛就像自己养的一只小生命，你每天得用时间去喂它，不然就长不大。当决定要做某件事的时候，持之以恒是最难熬的，但一旦突破某个拐点就可能会给你带来指数型的收益。开了个博客，开始写作（想想可能最近一篇文章是高考作文了吧 &gt;_&lt;),也当作自己的一个兴趣吧，记录一下自己的生活，尝试着写一下技术博客，总结一下人生经历，希望能够让自己变得越来越好。</p>
</blockquote>
<h2 id="2018展望"><a href="#2018展望" class="headerlink" title="2018展望"></a>2018展望</h2><blockquote>
<p>每个人都在寻找自己的栖息地，常有这样的愿景：有一个这样的咖啡厅，你可以在里面看书，剋元在里面玩音乐，可以做自己喜欢的事，人们能够将灵魂寄宿在这里而不会感到空虚。当然这也是我的一个探索的想法。2018新的一年以对自己做了一些规划，也希望能够将这些规划的实现呈现在这里，敬请期待～</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="谢嘉林" />
            
              <p class="site-author-name" itemprop="name">谢嘉林</p>
              <p class="site-description motion-element" itemprop="description">一叶一世界，一念一修行。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/MonkeyDjialinXie" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/users/357d22064e21/timeline" target="_blank" title="简书">
                      
                        <i class="fa fa-fw fa-globe"></i>简书</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xie-zhu-long-en-x/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://blog.csdn.net/garlic29" target="_blank" title="csdn">
                      
                        <i class="fa fa-fw fa-globe"></i>csdn</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">谢嘉林</span>

  
</div>



<span id="busuanzi_container_site_uv">
  本站总访问量<span id="busuanzi_value_site_uv"></span>次
</span>

  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
